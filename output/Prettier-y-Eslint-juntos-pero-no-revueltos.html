<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>📝 Prettier y Eslint juntos, pero no revueltos</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><p><strong>Prettier</strong> y <strong>ESLint</strong> se pelean entre ellos porque los dos se preocupan por formatear tu código, pero con la configuración adecuada puedes tener lo mejor de cada uno en todos tus proyectos.</p>
<hr>
<h5 id="📔-resumen"><a class="header-link" href="#📔-resumen"></a>📔 RESUMEN</h5>
<p>PRETTIER</p>
<pre class="hljs"><code><span class="hljs-number">1.</span> npm install prettier -D
<span class="hljs-number">2.</span> Crear .prettierrc.json en ./
<span class="hljs-number">3.</span> Actualizar _settings.json_ con
    <span class="hljs-string">"[javascript]"</span>: {
        <span class="hljs-string">"editor.defaultFormatter"</span>: <span class="hljs-string">"esbenp.prettier-vscode"</span>,
        <span class="hljs-string">"editor.formatOnSave"</span>: <span class="hljs-literal">true</span>
      }
<span class="hljs-number">4.</span> Instalar extensión Prettier</code></pre><p>ESLINT</p>
<pre class="hljs"><code>1. npm install eslint -D
2. npx eslint --init
3. Instalar exptensión ESLint
</code></pre><p>EVITAR CONFLICTOS</p>
<pre class="hljs"><code><span class="hljs-number">1.</span> npm install eslint-config-prettier -D
<span class="hljs-number">2.</span> Actualizar .eslintrc.js con <span class="hljs-string">"Prettier"</span> en útlimo lugar

  extends: [
            <span class="hljs-string">"plugin:react/recommended"</span>,
            <span class="hljs-string">"standard"</span>,
            <span class="hljs-string">"prettier"</span>
            ],</code></pre><hr>
<h3 id="📦-prettier"><a class="header-link" href="#📦-prettier"></a>📦 Prettier</h3>
<p>Prettier formateo tu código. La idea original de Prettier es no tener configuración. Pretende evitar debates de sobre el formateo de código. Aquí podeis ver lo que dicen en su página oficial.
<img src="../img/prettier.PNG" alt="Prettier has a few options but we don`t want more of them"></p>
<h4 id="🔨-instalación"><a class="header-link" href="#🔨-instalación"></a>🔨 Instalación</h4>
<pre class="hljs"><code>npm install prettier -D</code></pre><ul class="list">
<li>Crear archivo de configuración de Prettier <em>prettierrc.json</em> aunque sea vacío.</li>
</ul>
<h4 id="🎯-comandos"><a class="header-link" href="#🎯-comandos"></a>🎯 Comandos</h4>
<pre class="hljs"><code>npx prettier . --check
<span class="hljs-comment"># Nos muestra por consola los errores de formateo</span>

npx prettier . --write
<span class="hljs-comment"># Nos arregla los errores de formateo</span></code></pre><p>👌 Estos comandos hacen un checkeo general de todo tu proyecto. Podemos ignorar carpetas creando un archivo <strong>.prettierignore</strong></p>
<ul class="list">
<li><p>Instalar extensión de Prettier</p>
<p class="img-container"><img src="../img/prettierextension.PNG" alt="Plugin de Prettier para VSC"></p>
</li>
<li><p>Debemos aseguarnos que el formateador por dedecto en <em>settings.json</em> es el de prettier <strong>esbenp.prettier-vscode</strong></p>
</li>
</ul>
<pre class="hljs"><code>   <span class="hljs-string">"editor.defaultFormatter"</span>: <span class="hljs-string">"esbenp.prettier-vscode"</span>,
  <span class="hljs-string">"[javascript]"</span>: {
    <span class="hljs-string">"editor.defaultFormatter"</span>: <span class="hljs-string">"esbenp.prettier-vscode"</span>,
    <span class="hljs-string">"editor.formatOnSave"</span>: <span class="hljs-literal">true</span>
  },</code></pre><h3 id="📦-eslint"><a class="header-link" href="#📦-eslint"></a>📦 Eslint</h3>
<p>Encuentra problemas en tu código. No sólo de formateo, si no también errores como dejar una variable sin usar y cosas así. Automáticamente puede solucionarte estos problemas. Evidentemente no lo soluciona todo, pero es una muy buena aproximación.</p>
<h4 id="🔨-instalación-1"><a class="header-link" href="#🔨-instalación-1"></a>🔨 Instalación</h4>
<pre class="hljs"><code>npm install eslint -D
<span class="hljs-comment"># Instala el apquete EsLint</span>

npx eslint --init
<span class="hljs-comment"># Inicializar ESLint</span></code></pre><p>Nos va a hacer una serie de preguntas para configurar ESLint. Si usamos TypeScript, que tipo de errores queremos que contemple... 👌 Puedes ver una configuración explicada por Midudev <a href="https://youtu.be/EEDRcolSHms?t=499">aqui</a>.</p>
<p>Nos pedirá instalar algunas dependencias necesarias y ahora tendremos un archivo <em>.eslintrc.js</em> en la raíz desde nuestro proyecto parecido a este:</p>
<p class="img-container"><img src="../img/eslint.PNG" alt=".eslintrc.js"></p>
<ul class="list">
<li><p>instalar la extensión eslint</p>
<p class="img-container"><img src="../img/eslintextension.PNG" alt="extension ESLint para VSC"></p>
</li>
</ul>
<h4 id="🎯-comandos-1"><a class="header-link" href="#🎯-comandos-1"></a>🎯 Comandos</h4>
<pre class="hljs"><code>npx eslint .
<span class="hljs-comment"># Nos muestras por consola todos los errores que encuentra en nuestro código</span>

npx eslint --fix
<span class="hljs-comment"># Arregla todos los errores que puede solucionar</span></code></pre><p>👌 <strong>Formatear al guardar</strong>. Esto no lo hace por defecto. Pero podemos configuarlo en el archivo settings.json.</p>
<pre class="hljs"><code><span class="hljs-string">"[javascript]"</span>: {
    <span class="hljs-string">"editor.defaultFormatter"</span>: <span class="hljs-string">"esbenp.prettier-vscode"</span>,
    <span class="hljs-string">"editor.formatOnSave"</span>: <span class="hljs-literal">true</span>
  }</code></pre><h3 id="🙌-evitar-conflictos-entre-eslint-y-prettier"><a class="header-link" href="#🙌-evitar-conflictos-entre-eslint-y-prettier"></a>🙌 Evitar conflictos entre ESLint y Prettier</h3>
<pre class="hljs"><code>npm install eslint-config-prettier -D</code></pre><ul class="list">
<li>Añadimos esta nueva configuración <strong>Prettier</strong> en el archivo .eslintrc.js. <strong>Añadirla la última</strong>
Con poner <strong>Prettier</strong> automáticamente ya detecta que estamos hablando del paquete que acabamos de instalar.</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">// eslintrc.js</span>
  extends: [
            <span class="hljs-string">"plugin:react/recommended"</span>,
            <span class="hljs-string">"standard"</span>,
            <span class="hljs-string">"prettier"</span>
            ],</code></pre><p>Estas configuración desactivar todas la reglas de <strong>ESLint</strong> que entren en conflicto con las de Prettier. Éste será ahora el encargado de formatear tu código.</p>
<h3 id="🌟-extra:-pasar-eslint-&-pritter-antes-de-commitear"><a class="header-link" href="#🌟-extra:-pasar-eslint-&-pritter-antes-de-commitear"></a>🌟 EXTRA: Pasar ESLint &amp; Pritter antes de commitear</h3>
<pre class="hljs"><code>npm mrm lint-staged</code></pre><p>mrm es un paquete para <strong>cambiar de forma rápida los archivos de configuración</strong> de un proyecto, como el package.json, por ejemplo.</p>
<p>A este mrm se le pasa el preset de lint-staged que actualiza nuestro package.json con los scripts necesarios para que pase el ESLint y el Prettier antes de ejecutar un commit y nos impida commitear si encuentra algún error.</p>
<p>👌 Sólo lo pasa a los archivos que hemos modificado.</p>
<p>Esto es lo que se añade a nuestro <strong>package.json</strong></p>
<pre class="hljs"><code>  <span class="hljs-string">"husky"</span>: {
    <span class="hljs-string">"hooks"</span>: {
      <span class="hljs-string">"pre-commit"</span>: <span class="hljs-string">"lint-staged"</span>
    }
  },
  <span class="hljs-string">"lint-staged"</span>: {
    <span class="hljs-string">"*.js"</span>: <span class="hljs-string">"eslint --cache --fix"</span>,
    <span class="hljs-string">"*.{js,css,md}"</span>: <span class="hljs-string">"prettier --write"</span>
  }</code></pre><p>📚 <em>sources:</em></p>
<ul class="list">
<li><a href="https://eslint.org/docs/user-guide/getting-started">ESLint</a></li>
<li><a href="https://prettier.io/">Pretiter</a></li>
<li><a href="https://youtu.be/EEDRcolSHms?t=1321">Javascript Standar Style</a></li>
<li><a href="https://prettier.io/docs/en/option-philosophy.html">Prettier&#39;s Option Philosoply</a></li>
<li><a href="https://github.com/okonet/lint-staged">Lint-staged</a></li>
</ul>
    </article>
  </body>
</html>
